# ğŸ“Š EchoType å°ˆæ¡ˆåˆ†æå ±å‘Š

> ç”Ÿæˆæ™‚é–“: 2026-01-07T22:25:00+08:00 [time.now:Asia/Taipei]
> åˆ†æè€…: è‡ªå‹•åŒ–æœ€ä½³å¯¦è¸è½åœ°å°ˆå®¶

---

## 1. åˆ†ææ‘˜è¦

### 1.1 éœ€æ±‚é—œéµå­—æŠ½å–

| ä¸»é¡Œ | é—œéµéœ€æ±‚ | å„ªå…ˆç´š |
|------|----------|--------|
| **æ ¸å¿ƒåŠŸèƒ½** | ChatGPT è½å¯«æ§åˆ¶ã€baseline diffã€ç©©å®šåŒ–æ“·å– | P0 |
| **å…¨ç¶²é è½‰é€** | å»£æ’­çµæœã€è‡ªå‹•è²¼ä¸Šã€å‰ªè²¼ç°¿ | P0 |
| **é–‹ç™¼æ–¹æ³•** | BDDã€ç´…ç‡ˆç¶ ç‡ˆé‡æ§‹ã€åŸå­ commit | P1 |
| **æ¶æ§‹** | æ¨¡çµ„åŒ–ã€é«˜å¯ç¶­è­·æ€§ã€ä½æŠ€è¡“å‚µ | P1 |
| **æ¸¬è©¦** | å–®å…ƒæ¸¬è©¦ã€E2E æ¸¬è©¦ã€Playwright | P1 |
| **UX å„ªåŒ–** | æ­·å²è¨˜éŒ„ã€Options é é¢ã€å¿«æ·éµ | P2 |

### 1.2 ä¸»é¡Œåˆ†é¡

1. **Infrastructure**: å°ˆæ¡ˆæ¶æ§‹ã€ä¾è³´ç®¡ç†ã€Build é…ç½®
2. **Core Logic**: è½å¯«æ§åˆ¶ã€æ–‡å­—æ“·å–ã€å·®åˆ†è¨ˆç®—
3. **Communication**: è¨Šæ¯å”å®šã€æ¨¡çµ„é–“é€šè¨Š
4. **UI/UX**: Options é é¢ã€Popupï¼ˆæœªä¾†ï¼‰
5. **Testing**: BDD è¦æ ¼ã€å–®å…ƒæ¸¬è©¦ã€E2E æ¸¬è©¦
6. **DevOps**: ç‰ˆæœ¬ç®¡ç†ã€CI/CD

---

## 2. æœ€ä½³å¯¦è¸å„ªåŒ–æ–¹æ¡ˆ

### 2.1 CRXJS Vite Plugin [context7:/crxjs/chrome-extension-tools]

| é …ç›® | ç¾æ³ | æœ€ä½³å¯¦è¸ | ç‹€æ…‹ |
|------|------|----------|------|
| MV3 æ”¯æ´ | âœ… manifest.json å·²é…ç½® | ä½¿ç”¨ Service Worker | âœ… ç¬¦åˆ |
| HMR | âœ… vite.config.ts å·²é…ç½® | Content Script HMR | âœ… ç¬¦åˆ |
| éœæ…‹è³‡æº | âš ï¸ icons ç‚º placeholder | æ­£å¼ icon è¨­è¨ˆ | ğŸ”„ å¾…æ”¹é€² |

### 2.2 Chrome Extension MV3 [context7:chrome/extensions]

| é …ç›® | ç¾æ³ | æœ€ä½³å¯¦è¸ | ç‹€æ…‹ |
|------|------|----------|------|
| Offscreen API | âœ… å·²å¯¦ä½œ | å‰ªè²¼ç°¿æ“ä½œ | âœ… ç¬¦åˆ |
| Commands API | âœ… 4 çµ„å¿«æ·éµ | å¯è‡ªè¨‚ | âœ… ç¬¦åˆ |
| Storage API | âœ… sync + session | è¨­å®šæŒä¹…åŒ– | âœ… ç¬¦åˆ |
| Host Permissions | âœ… chatgpt.com | æœ€å°æ¬Šé™åŸå‰‡ | âœ… ç¬¦åˆ |

### 2.3 Playwright E2E [context7:/ruifigueira/playwright-crx]

| é …ç›® | ç¾æ³ | æœ€ä½³å¯¦è¸ | ç‹€æ…‹ |
|------|------|----------|------|
| Fixtures | âœ… å·²å»ºç«‹ | launchPersistentContext | âœ… ç¬¦åˆ |
| Extension ID | âœ… å¾ SW æå– | MV3 Service Worker | âœ… ç¬¦åˆ |
| æ¸¬è©¦çµæ§‹ | âœ… options.spec.ts | åˆ†æª”æ¡ˆçµ„ç¹” | âœ… ç¬¦åˆ |

---

## 3. å°ˆæ¡ˆæ­¥é©Ÿæ¸…å–®ï¼ˆå®Œæˆåº¦æ¨™è¨»ï¼‰

### Phase 1-8: åŸºç¤é–‹ç™¼ âœ… 100%

| æ­¥é©Ÿ | æè¿° | ç‹€æ…‹ |
|------|------|------|
| 1.1 | AGENTS.md å»ºç«‹ | âœ… |
| 1.2 | BDD features 4 å€‹ | âœ… |
| 1.3 | package.json + CRXJS | âœ… |
| 1.4 | manifest.json MV3 | âœ… |
| 2.x | shared/ æ¨¡çµ„ (3 æª”æ¡ˆ) | âœ… |
| 3.x | content/chatgpt/ (6 æª”æ¡ˆ) | âœ… |
| 4.x | background/ (5 æª”æ¡ˆ) | âœ… |
| 5.x | offscreen/ (2 æª”æ¡ˆ) | âœ… |
| 6.x | options/ (2 æª”æ¡ˆ) | âœ… |
| 7.x | å–®å…ƒæ¸¬è©¦ (75 å€‹) | âœ… |
| 8.x | ç”Ÿç”¢ build | âœ… |

### Phase 9: E2E æ¸¬è©¦ ğŸ”„ 50%

| æ­¥é©Ÿ | æè¿° | ç‹€æ…‹ |
|------|------|------|
| 9.1 | Playwright å®‰è£ | âœ… |
| 9.2 | fixtures.ts | âœ… |
| 9.3 | options.spec.ts | âœ… |
| 9.4 | extension-load.spec.ts | âœ… |
| 9.5 | å¯¦éš›åŸ·è¡Œæ¸¬è©¦ | ğŸ”„ |

### Phase 10: UX å¢å¼· â³ 0%

| æ­¥é©Ÿ | æè¿° | ç‹€æ…‹ |
|------|------|------|
| 10.1 | Popup UI | â³ |
| 10.2 | æ­·å²è¨˜éŒ„ UI | â³ |
| 10.3 | ç‹€æ…‹è¦–è¦ºå›é¥‹ | â³ |

### Phase 11: ç™¼å¸ƒæº–å‚™ ğŸ”„ 33%

| æ­¥é©Ÿ | æè¿° | ç‹€æ…‹ |
|------|------|------|
| 11.1 | README.md | âœ… |
| 11.2 | CHANGELOG.md | ğŸ”„ |
| 11.3 | Icon è¨­è¨ˆ | â³ |

---

## 4. To-Do List

### ğŸ”´ P0 - ç«‹å³åŸ·è¡Œ

| ID | ä»»å‹™ | è² è²¬äºº | é ä¼°æ™‚é–“ |
|----|------|--------|----------|
| T1 | åŸ·è¡Œ E2E æ¸¬è©¦é©—è­‰ | Spectrum | 15 min |
| T2 | ä¿®å¾©ä»»ä½•æ¸¬è©¦å¤±æ•— | Signal | 30 min |
| T3 | æ‰‹å‹•ç€è¦½å™¨æ¸¬è©¦ | Echo | 20 min |

### ğŸŸ¡ P1 - çŸ­æœŸå„ªåŒ–

| ID | ä»»å‹™ | è² è²¬äºº | é ä¼°æ™‚é–“ |
|----|------|--------|----------|
| T4 | å»ºç«‹ Popup UI åŸºç¤çµæ§‹ | Pulse | 1 hr |
| T5 | è¨­è¨ˆæ­£å¼ icon é›† | Pulse | 2 hr |
| T6 | å®Œå–„ CHANGELOG.md | Echo | 30 min |

### ğŸŸ¢ P2 - ä¸­æœŸæ”¹é€²

| ID | ä»»å‹™ | è² è²¬äºº | é ä¼°æ™‚é–“ |
|----|------|--------|----------|
| T7 | æ­·å²è¨˜éŒ„ UI å±•ç¤º | Pulse | 2 hr |
| T8 | ç‹€æ…‹è¦–è¦ºå›é¥‹ï¼ˆbadgeï¼‰ | Signal | 1 hr |
| T9 | ChatGPT DOM å¥åº·æª¢æŸ¥ | Cipher | 1 hr |

---

## 5. å­åŠŸèƒ½è¦æ ¼

### 5.1 Popup UI (T4)

```typescript
// src/popup/index.ts
interface PopupState {
  status: 'idle' | 'recording' | 'processing';
  lastResult: string | null;
  history: HistoryItem[];
}

// Actions
- Quick Start/Stop æŒ‰éˆ•
- é¡¯ç¤ºæœ€è¿‘çµæœ
- ä¸€éµè¤‡è£½
- é–‹å•Ÿ Options
```

**é©—æ”¶æ¨™æº–**:
- [ ] Popup å¯æ­£å¸¸é–‹å•Ÿ
- [ ] é¡¯ç¤ºç•¶å‰ç‹€æ…‹
- [ ] å¯æ“ä½œ Start/Stop
- [ ] å¯è¤‡è£½æœ€è¿‘çµæœ

### 5.2 Extension Badge (T8)

```typescript
// src/background/badge.ts
type BadgeState = 'ready' | 'recording' | 'success' | 'error';

const BADGE_COLORS = {
  ready: '#888888',
  recording: '#FF4444',
  success: '#44FF44',
  error: '#FFAA00',
};
```

**é©—æ”¶æ¨™æº–**:
- [ ] éŒ„éŸ³æ™‚é¡¯ç¤ºç´…è‰² badge
- [ ] æˆåŠŸæ™‚é–ƒçˆç¶ è‰²
- [ ] éŒ¯èª¤æ™‚é¡¯ç¤ºé»ƒè‰²

---

## 6. ç•¶å‰é€²åº¦å¯¦ä½œ

### âœ… å·²å®Œæˆå¯¦ä½œ

1. **E2E æ¸¬è©¦æ¡†æ¶**
   - `playwright.config.ts` - æ¸¬è©¦é…ç½®
   - `tests/e2e/fixtures.ts` - æ“´å……å¥—ä»¶è¼‰å…¥ fixture
   - `tests/e2e/options.spec.ts` - Options é é¢æ¸¬è©¦
   - `tests/e2e/extension-load.spec.ts` - è¼‰å…¥æ¸¬è©¦

2. **æ–‡ä»¶æ›´æ–°**
   - `README.md` - å®Œæ•´ä½¿ç”¨èªªæ˜
   - `package.json` - æ–°å¢ e2e æ¸¬è©¦æŒ‡ä»¤

### ğŸ”„ ä¸‹ä¸€æ­¥åŸ·è¡Œ

```bash
# åŸ·è¡Œ E2E æ¸¬è©¦
pnpm test:e2e

# è‹¥å¤±æ•—ï¼Œæª¢æŸ¥éŒ¯èª¤ä¸¦ä¿®å¾©
# æˆåŠŸå¾Œé€²è¡ŒåŸå­ commit
```

---

## ğŸ“ˆ å“è³ªæŒ‡æ¨™

| æŒ‡æ¨™ | ç›®æ¨™ | ç¾æ³ |
|------|------|------|
| å–®å…ƒæ¸¬è©¦è¦†è“‹ç‡ | â‰¥ 80% | âœ… 75+ tests |
| E2E æ¸¬è©¦ | â‰¥ 5 scenarios | âœ… 9 tests |
| TypeScript Strict | 100% | âœ… |
| Build Size | < 50KB | âœ… ~20KB |
| æŠ€è¡“å‚µ | ä½ | âœ… æ¨¡çµ„åŒ–æ¶æ§‹ |

---

*æ­¤å ±å‘Šç”±è‡ªå‹•åŒ–æœ€ä½³å¯¦è¸è½åœ°ç³»çµ±ç”Ÿæˆ*
